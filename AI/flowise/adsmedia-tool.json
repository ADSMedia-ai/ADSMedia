{
  "name": "ADSMedia Email",
  "description": "Send emails via ADSMedia API",
  "nodes": [
    {
      "id": "adsmedia_send",
      "name": "ADSMedia Send Email",
      "type": "customTool",
      "data": {
        "name": "adsmedia_send_email",
        "description": "Send an email via ADSMedia API. Use for transactional emails.",
        "func": "const apiKey = $vars.ADSMEDIA_API_KEY;\nconst response = await fetch('https://api.adsmedia.live/v1/send', {\n  method: 'POST',\n  headers: {\n    'Authorization': `Bearer ${apiKey}`,\n    'Content-Type': 'application/json'\n  },\n  body: JSON.stringify({\n    to: $to,\n    subject: $subject,\n    html: $html\n  })\n});\nconst data = await response.json();\nif (data.success) {\n  return `Email sent! Message ID: ${data.data.message_id}`;\n} else {\n  return `Error: ${data.error || 'Unknown'}`;\n}",
        "inputVariables": [
          {
            "name": "to",
            "type": "string",
            "description": "Recipient email address"
          },
          {
            "name": "subject",
            "type": "string",
            "description": "Email subject"
          },
          {
            "name": "html",
            "type": "string",
            "description": "HTML content"
          }
        ]
      }
    },
    {
      "id": "adsmedia_check",
      "name": "ADSMedia Check Suppression",
      "type": "customTool",
      "data": {
        "name": "adsmedia_check_suppression",
        "description": "Check if an email is suppressed before sending.",
        "func": "const apiKey = $vars.ADSMEDIA_API_KEY;\nconst response = await fetch(`https://api.adsmedia.live/v1/suppressions/check?email=${encodeURIComponent($email)}`, {\n  headers: { 'Authorization': `Bearer ${apiKey}` }\n});\nconst data = await response.json();\nif (data.success) {\n  if (data.data.suppressed) {\n    return `Email ${$email} is SUPPRESSED: ${data.data.reason}`;\n  }\n  return `Email ${$email} is safe to send.`;\n}\nreturn `Error: ${data.error}`;",
        "inputVariables": [
          {
            "name": "email",
            "type": "string",
            "description": "Email to check"
          }
        ]
      }
    }
  ]
}

